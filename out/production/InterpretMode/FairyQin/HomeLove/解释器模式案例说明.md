###解释器设计模式案例说明:
- 解释器设计模式是行为型模型众多中的一个<mark>类行为型模式</mark>(另一个类行为型模型是模板方法设计模型)
- ---
- **定义**:给定一个语言，定义它的文法表示，并定义一个解释器，这个解释器使用该标识来解释语言中的句子。



- 在解释器模式中，我们需要将待解决的问题，提取出规则，抽象为一种“语言”。比如加减法运算，规则为：由数值和+-符号组成的合法序列，“1+3-2” 就是这种语言的句子。


- **什么是文法**：文法是用于描述语言的语法结构的形式规则


- **抽象语法树：**- **什么是文法**：文法是用于描述语言的语法结构的形式规则


### 6.11.2 结构

解释器模式包含以下主要角色。

* 抽象表达式（Abstract Expression）角色：定义解释器的接口，约定解释器的解释操作，主要包含解释方法 interpret()。

* 终结符表达式（Terminal  Expression）角色：是抽象表达式的子类，用来实现文法中与终结符相关的操作，文法中的每一个终结符都有一个具体终结表达式与之相对应。
* 非终结符表达式（Nonterminal Expression）角色：也是抽象表达式的子类，用来实现文法中与非终结符相关的操作，文法中的每条规则都对应于一个非终结符表达式。
* 环境（Context）角色：通常包含各个解释器需要的数据或是公共的功能，==一般用来传递被所有解释器共享的数据==，后面的解释器可以从这里获取这些值。
* 客户端（Client）：主要任务是将需要分析的句子或表达式转换成使用解释器对象描述的==抽象语法树==，然后调用解释器的解释方法，当然也可以通过环境角色间接访问解释器的解释方法。



### 6.11.3 案例实现

【例】设计实现加减法的软件(下面的类图存在问题，interpreter方法应该返回一个Interger类型的值)

![image-20230216210127266](https://cdn.staticaly.com/gh/GhostQinMo/ImageBed@master/DesignModeAll/image-20230216210127266.png)

**类图解析：**

- AbstractExpression是抽象表达式角色，拥有Interpret解释器方法用于解释语句，该方法依赖于Context（环境角色类）
- Variable用于对变量封装的类，name成员变量是变量的名字，toString方法只是为了在测试中验证
- Plus加法表达式     （非终极符表达式）
- Minus减法表达式    （非终结符表达式）
- Context是环境角色，有成员变量map用于保存变量名和变量值
- ==案例中只有value和Variable类的实例是终结符表达式==


